{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { withAuth } from \"next-auth/middleware\"\nimport { NextResponse } from \"next/server\"\n\nexport default withAuth(\n    // `withAuth` augments your `Request` with the user's token.\n    function middleware(req) {\n        console.log(req.nextauth.token)\n        return NextResponse.next();\n    },\n    {\n        callbacks: {\n            authorized: ({ token, req }) => {\n                const { pathname } = req.nextUrl\n\n                //allow auth related routes\n                if (\n                    pathname.startsWith(\"/api/auth\") ||\n                    pathname.startsWith(\"/login\") ||\n                    pathname.startsWith(\"/register\")\n                ) {\n                    return true;\n                }\n\n                //public routes\n                if (\n                    pathname === \"/\" ||\n                    pathname.startsWith(\"/api/products\") ||\n                    pathname.startsWith(\"/products\")\n                ) {\n                    return true\n                }\n\n                //admin routes require admin role\n                if (\n                    pathname.startsWith(\"/admin\")\n                ) {\n                    return token?.role === \"admin\"\n                }\n\n                //all other routes require authentication\n                return token ? true : false\n            },\n        },\n    },\n)\n\nexport const config = {\n    matcher: [\n        // match all routed paths except static files,image optimization files/favicon files and public folder\n        \"/((?!_next/static|_next/image|favicon.ico|public/).*)\"\n    ]\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;uCAEe,CAAA,GAAA,kJAAA,CAAA,WAAQ,AAAD,EAClB,4DAA4D;AAC5D,SAAS,WAAW,GAAG;IACnB,QAAQ,GAAG,CAAC,IAAI,QAAQ,CAAC,KAAK;IAC9B,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;AAC5B,GACA;IACI,WAAW;QACP,YAAY,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE;YACvB,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;YAEhC,2BAA2B;YAC3B,IACI,SAAS,UAAU,CAAC,gBACpB,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,cACtB;gBACE,OAAO;YACX;YAEA,eAAe;YACf,IACI,aAAa,OACb,SAAS,UAAU,CAAC,oBACpB,SAAS,UAAU,CAAC,cACtB;gBACE,OAAO;YACX;YAEA,iCAAiC;YACjC,IACI,SAAS,UAAU,CAAC,WACtB;gBACE,OAAO,OAAO,SAAS;YAC3B;YAEA,yCAAyC;YACzC,OAAO,QAAQ,OAAO;QAC1B;IACJ;AACJ;AAGG,MAAM,SAAS;IAClB,SAAS;QACL,sGAAsG;QACtG;KACH;AACL"}}]
}